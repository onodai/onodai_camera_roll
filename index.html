<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Image Feed</title>

  <style>
    body {
      margin: 0;
      padding: 16px;
      font-family: system-ui, sans-serif;
      background: #ffffff;
    }

   @media (max-width: 600px) {
  body {
    padding: 0;        /* 余白を消す */
  }

  .feed {
    max-width: none;   /* 幅制限を解除 */
    margin: 0;
  }

  .item {
    margin-bottom: 24px;
  }
}

    .item {
      margin-bottom: 32px;
    }

    .item img {
      width: 100%;
      display: block;
      border-radius: 0; /* 角丸なし */
    }

    .timestamp {
      margin-top: 10px;          /* 画像から10px下 */
      text-align: right;         /* 右下寄せ */
      font-size: 12px;
      color: #666;
    }
  </style>
</head>
<body>

  <div class="feed" id="feed"></div>

 <script>
  const API_URL =
    "https://script.google.com/macros/s/AKfycbwnKCGF9XAjkUBjjy9UfSL7M1cKT7PJijeV98Sh2XMUBjPmxwwmKkIZExxL3L_MDdA8dw/exec";

  fetch(API_URL)
    .then(res => res.json())
    .then(items => {
      const feed = document.getElementById("feed");

      // 時間順に並び替え
      items.sort(
        (a, b) => new Date(b.timestamp) - new Date(a.timestamp)
      );

      // 1セット目
      items.forEach(item => {
        feed.appendChild(createItem(item));
      });

      // 2セット目（コピー）
      items.forEach(item => {
        feed.appendChild(createItem(item));
      });

      const halfHeight = feed.scrollHeight / 2;

      window.addEventListener("scroll", () => {
        if (window.scrollY >= halfHeight) {
          // 見えない位置調整
          window.scrollTo(0, window.scrollY - halfHeight);
        }
      });
    });

  function createItem(item) {
    const wrapper = document.createElement("div");
    wrapper.className = "item";

    const img = document.createElement("img");
    img.src = item.image_url;
    img.loading = "lazy";

    const time = document.createElement("div");
    time.className = "timestamp";
    time.textContent =
      new Date(item.timestamp).toLocaleString("ja-JP");

    wrapper.append(img, time);
    return wrapper;
  }
</script>

</body>
</html>
